# データベースの構築
初めにデータベースの構築をします。  
MySQL等のDBMSにログインし、次のコードを書きます。
```sql
create database internet_tv;
```
次に使用するデータベースを選択します。
```sql
use internet_tv;
```

# テーブルの構築
ステップ1で設計したテーブルを依存関係の順番で作成していきます。
## チャンネルテーブル
```sql
CREATE TABLE channels (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(100) NOT NULL
);
```

## 番組テーブル
```sql
CREATE TABLE programs (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(255) NOT NULL,
description TEXT,
is_series BOOLEAN NOT NULL DEFAULT 0
);
```

## ジャンルテーブル
```sql
CREATE TABLE genres (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(100) NOT NULL UNIQUE
);
```

## 番組とジャンルの中間テーブル
```sql
CREATE TABLE program_genres (
program_id BIGINT NOT NULL,
genre_id BIGINT NOT NULL,
PRIMARY KEY (program_id, genre_id),
FOREIGN KEY (program_id) REFERENCES programs(id),
FOREIGN KEY (genre_id) REFERENCES genres(id)
);
```

## シーズンテーブル
```sql
CREATE TABLE seasons (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
program_id BIGINT NOT NULL,
season_number INT NOT NULL,
UNIQUE (program_id, season_number),
FOREIGN KEY (program_id) REFERENCES programs(id)
);
```

## エピソードテーブル
```sql
CREATE TABLE episodes (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
program_id BIGINT NOT NULL,
season_id BIGINT,
episode_number INT,
title VARCHAR(255) NOT NULL,
description TEXT,
duration_seconds INT NOT NULL,
published_at DATETIME NOT NULL,
FOREIGN KEY (program_id) REFERENCES programs(id),
FOREIGN KEY (season_id) REFERENCES seasons(id)
);
```

## 番組枠テーブル
```sql
CREATE TABLE program_slots (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
channel_id BIGINT NOT NULL,
start_time DATETIME NOT NULL,
end_time DATETIME NOT NULL,
FOREIGN KEY (channel_id) REFERENCES channels(id)
);
```

## 放送テーブル（番組枠 × エピソード）
```sql
CREATE TABLE broadcasts (
id BIGINT AUTO_INCREMENT PRIMARY KEY,
program_slot_id BIGINT NOT NULL,
episode_id BIGINT NOT NULL,
FOREIGN KEY (program_slot_id) REFERENCES program_slots(id),
FOREIGN KEY (episode_id) REFERENCES episodes(id)
);
```

## KPIテーブル
```sql
CREATE TABLE episode_views (
broadcast_id BIGINT PRIMARY KEY,
view_count BIGINT NOT NULL,
FOREIGN KEY (broadcast_id) REFERENCES broadcasts(id)
);
```
# サンプルデータ
サンプルデータを投入します。
## チャンネル
```sql
INSERT INTO channels (name) VALUES
('ドラマ1'),
('ドラマ2'),
('アニメ1'),
('アニメ2'),
('スポーツ'),
('ペット');
```

# サンプルデータ
